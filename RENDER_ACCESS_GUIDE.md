# Render Access Guide - Travectio Fleet Management

**Service:** Travectio API  
**Deployment Target:** Render.com  
**Environment:** Production  
**Last Updated:** August 12, 2025  

---

## üöÄ Quick Start - Deploy to Render

### **Step 1: Access Render Dashboard**
```
URL: https://render.com/dashboard
Account: Use your GitHub account for seamless integration
```

### **Step 2: Create New Web Service**
1. **Click "New +"** in top-right corner
2. **Select "Web Service"** from dropdown
3. **Connect GitHub Repository:**
   - Click "Connect GitHub"
   - Authorize Render access to your repositories
   - Select "Travectio" repository
   - Choose `main` branch

### **Step 3: Configure Service Settings**
```
Service Name: travectio-api
Region: US East (Ohio)
Branch: main
Runtime: Node
Build Command: npm install && npm run build
Start Command: npm start
```

---

## üîß Detailed Configuration Steps

### **Service Configuration**
**Basic Settings:**
- **Name:** `travectio-api`
- **Environment:** Web Service
- **Region:** US East (Ohio) - Optimal for US trucking operations
- **Plan:** Starter ($7/month) - Upgradeable as needed

**Repository Settings:**
- **Repository:** Your GitHub Travectio repository
- **Branch:** `main` (auto-deploy enabled)
- **Root Directory:** Leave blank (deploy from root)

### **Build Configuration**
**Build Command:**
```bash
npm install && npm run build
```
This will:
- Install all Node.js dependencies
- Compile TypeScript (backend)
- Build React frontend with Vite
- Create production-ready `dist/` directory

**Start Command:**
```bash
npm start
```
This runs:
- `NODE_ENV=production node dist/index.js`
- Serves both API and frontend from single server
- Uses production optimizations

### **Advanced Settings**
**Health Check:**
- **Path:** `/api/health`
- **Timeout:** 30 seconds
- **Grace Period:** 60 seconds

**Auto-Deploy:**
- **Enabled:** Yes (deploys on push to main branch)
- **Build Time Limit:** 15 minutes
- **Deploy Previews:** Disabled for security

---

## üåç Environment Variables Setup

### **Required Environment Variables**
Add these in Render Dashboard ‚Üí Environment tab:

**Core Application:**
```
NODE_ENV=production
PORT=10000
SESSION_SECRET=[auto-generated by Render]
```

**Database Connection:**
```
DATABASE_URL=[from Supabase connection string]
```
*Get this from your Supabase project dashboard*

**Optional API Integrations:**
```
OPENAI_API_KEY=[your-openai-api-key]
DAT_API_KEY=[your-dat-loadboard-key]  
TRUCKSTOP_API_KEY=[your-truckstop-key]
SAMSARA_API_KEY=[your-samsara-eld-key]
```

### **How to Add Environment Variables**
1. **Navigate to Service:** Go to your `travectio-api` service
2. **Environment Tab:** Click "Environment" in left sidebar
3. **Add Variable:** Click "Add Environment Variable"
4. **Enter Details:**
   - Key: Variable name (e.g., `DATABASE_URL`)
   - Value: Variable value (keep secure)
5. **Save:** Click "Save Changes"
6. **Redeploy:** Service automatically redeploys with new variables

---

## üóÑÔ∏è Database Connection Setup

### **Supabase Integration**
**Get Connection String:**
1. **Supabase Dashboard:** Go to your project
2. **Settings ‚Üí Database**
3. **Connection String ‚Üí Transaction mode**
4. **Copy URI:** Replace `[YOUR-PASSWORD]` with actual password

**Add to Render:**
```
Variable: DATABASE_URL
Value: postgresql://postgres:[PASSWORD]@[HOST]:5432/postgres
```

**Connection Pool Settings:**
- **Max Connections:** 100 (Supabase default)
- **SSL Mode:** Required (automatic)
- **Timeout:** 30 seconds

### **Database Schema Deployment**
**After first deployment:**
```bash
# Connect to deployed service and run:
npm run db:push
```
This pushes your Drizzle schema to the production database.

---

## üîí Security Configuration

### **Automatic Security Features**
**SSL/HTTPS:**
- **Certificate:** Automatic Let's Encrypt
- **Renewal:** Automatic every 90 days
- **HTTP Redirect:** Automatic HTTPS redirect
- **HSTS:** HTTP Strict Transport Security enabled

**Network Security:**
- **DDoS Protection:** Built-in Render protection
- **Firewall:** Managed security rules
- **IP Filtering:** Available for paid plans

### **Application Security Setup**
**CORS Configuration:**
Update your server to allow production domain:
```typescript
// In server/index.ts
app.use(cors({
  origin: ['https://travectio-api.onrender.com'],
  credentials: true
}));
```

**Session Security:**
```typescript
// Production session configuration
{
  secure: true,           // HTTPS only
  httpOnly: true,         // Prevent XSS
  sameSite: 'strict',     // CSRF protection
  maxAge: 24 * 60 * 60 * 1000  // 24 hours
}
```

---

## üìä Monitoring & Performance

### **Built-in Monitoring**
**Health Checks:**
- **Endpoint:** `GET /api/health`
- **Frequency:** Every 30 seconds
- **Failure Threshold:** 3 consecutive failures
- **Recovery:** Automatic service restart

**Metrics Dashboard:**
- **CPU Usage:** Real-time monitoring
- **Memory Usage:** RAM consumption tracking
- **Response Time:** Request latency metrics
- **Error Rate:** HTTP error percentage

### **Log Access**
**Live Logs:**
1. **Service Dashboard:** Go to travectio-api service
2. **Logs Tab:** View real-time application logs
3. **Filter Logs:** Search by severity, time, or content
4. **Download Logs:** Export for external analysis

**Log Retention:**
- **Free Plan:** 7 days retention
- **Paid Plans:** 30+ days retention
- **Log Streaming:** Available to external services

---

## üöÄ Deployment Process

### **Automatic Deployment**
**Trigger:** Push to `main` branch
**Process:**
1. **Webhook:** GitHub notifies Render of new commit
2. **Build Start:** Render pulls latest code
3. **Dependencies:** `npm install` runs
4. **Build:** `npm run build` compiles application
5. **Health Check:** `/api/health` endpoint tested
6. **Traffic Switch:** New version goes live
7. **Cleanup:** Previous version retained for rollback

### **Manual Deployment**
**Dashboard Method:**
1. **Service Page:** Navigate to travectio-api
2. **Manual Deploy:** Click "Manual Deploy" button
3. **Select Commit:** Choose specific commit (optional)
4. **Deploy:** Confirm deployment
5. **Monitor:** Watch build logs in real-time

### **Deployment Status**
**Build States:**
- **Building:** Dependencies installing, code compiling
- **Deploy:** New version being activated
- **Live:** Successfully deployed and serving traffic
- **Failed:** Build or deployment error (check logs)

**Rollback Option:**
- **Previous Versions:** Last 10 deployments available
- **One-Click Rollback:** Instant revert to working version
- **Zero Downtime:** Traffic switches seamlessly

---

## üåê Domain Configuration

### **Default Domain**
**Provided Domain:**
```
https://travectio-api.onrender.com
```
- **SSL:** Automatic and always enabled
- **Uptime:** 99.9% availability target
- **Global CDN:** Static assets cached worldwide

### **Custom Domain Setup**
**Add Custom Domain:**
1. **Service Settings:** Go to Settings tab
2. **Custom Domains:** Click "Add Custom Domain"
3. **Domain Name:** Enter your domain (e.g., api.travectio.com)
4. **DNS Configuration:** Add CNAME record to DNS provider
5. **SSL Certificate:** Automatic provisioning (5-10 minutes)

**DNS Configuration:**
```
Type: CNAME
Name: api (or your subdomain)
Value: travectio-api.onrender.com
TTL: 300 (5 minutes)
```

---

## üí∞ Pricing & Plans

### **Current Configuration**
**Starter Plan:** $7/month
- **Resources:** 512MB RAM, 0.5 CPU
- **Features:** No sleep, custom domains, SSL
- **Bandwidth:** 100GB/month
- **Build Time:** 10 minutes/day

### **Scaling Options**
**Standard Plan:** $25/month
- **Resources:** 2GB RAM, 1 CPU
- **Build Time:** 400 minutes/month
- **Enhanced Monitoring:** Advanced metrics

**Pro Plan:** $85/month
- **Resources:** 4GB RAM, 2 CPU
- **Priority Support:** Faster response times
- **Advanced Features:** Staging environments

### **Usage Monitoring**
**Track Usage:**
- **Resource Usage:** Monitor RAM/CPU in dashboard
- **Bandwidth:** Track monthly data transfer
- **Build Minutes:** Monitor build time consumption
- **Overage Alerts:** Automatic notifications

---

## üõ†Ô∏è Troubleshooting

### **Common Issues**

**Build Failures:**
```
Error: "npm ERR! peer dep missing"
Solution: Check package.json dependencies
Action: Run `npm install` locally first
```

**Memory Issues:**
```
Error: "JavaScript heap out of memory"
Solution: Upgrade to Standard plan (2GB RAM)
Action: Optimize build process or increase resources
```

**Database Connection:**
```
Error: "connect ECONNREFUSED"
Solution: Verify DATABASE_URL environment variable
Action: Check Supabase connection string format
```

### **Health Check Failures**
**Common Causes:**
- Server not listening on correct port (must use PORT env var)
- Health endpoint not responding within 30 seconds
- Application crash during startup

**Debugging Steps:**
1. **Check Logs:** Review deployment logs for errors
2. **Verify Port:** Ensure app uses `process.env.PORT || 10000`
3. **Test Locally:** Run `npm start` locally first
4. **Health Endpoint:** Ensure `/api/health` returns 200 status

### **Performance Issues**
**Slow Response Times:**
- **Database:** Check Supabase connection pool
- **Memory:** Monitor RAM usage in dashboard
- **CPU:** Check for expensive operations

**High Error Rates:**
- **Application Logs:** Check for uncaught exceptions
- **Database Errors:** Verify connection stability
- **API Limits:** Check third-party service limits

---

## üìû Support & Resources

### **Render Documentation**
- **Web Services:** https://render.com/docs/web-services
- **Environment Variables:** https://render.com/docs/environment-variables
- **Custom Domains:** https://render.com/docs/custom-domains
- **Troubleshooting:** https://render.com/docs/troubleshooting

### **Render Support**
- **Community Forum:** https://community.render.com
- **Discord:** https://discord.gg/render
- **Email Support:** Available for paid plans
- **Status Page:** https://status.render.com

### **Application Support**
**Health Check:**
```
curl https://travectio-api.onrender.com/api/health
```

**Expected Response:**
```json
{
  "status": "healthy",
  "timestamp": "2025-08-12T...",
  "database": "connected",
  "version": "1.0.0",
  "environment": "production"
}
```

---

## ‚úÖ Final Checklist

### **Pre-Deployment**
- [ ] GitHub repository contains all source code
- [ ] render.yaml configuration file exists
- [ ] Database schema is ready for deployment
- [ ] Environment variables documented
- [ ] Health check endpoint implemented

### **Deployment Day**
- [ ] Create Render web service
- [ ] Configure build and start commands
- [ ] Add environment variables
- [ ] Connect Supabase database
- [ ] Test health check endpoint
- [ ] Verify application functionality
- [ ] Monitor deployment logs

### **Post-Deployment**
- [ ] Test all application features
- [ ] Verify database connectivity
- [ ] Check SSL certificate status
- [ ] Monitor performance metrics
- [ ] Set up monitoring alerts
- [ ] Document production URLs

---

**Your Travectio Fleet Management System is ready for production deployment on Render with enterprise-grade configuration and monitoring.**